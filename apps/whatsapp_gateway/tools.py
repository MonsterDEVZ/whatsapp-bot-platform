"""
AI Agent Tools - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è OpenAI Assistant.

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç Python-—Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ AI Agent –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å
–¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π.

–ö–∞–∂–¥–∞—è —Ñ—É–Ω–∫—Ü–∏—è:
- –Ø–≤–ª—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π (async)
- –ò–º–µ–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π docstring
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ—Å—Ç—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (str, list, dict, float)
- –õ–æ–≥–∏—Ä—É–µ—Ç —Å–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
"""

import logging
from typing import List, Dict, Any, Optional
from sqlalchemy.ext.asyncio import AsyncSession

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ queries
from packages.core.db import queries as db_queries

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º Airtable integration
from packages.core.integrations.airtable_manager import create_lead

logger = logging.getLogger(__name__)


# ==============================================================================
# AI AGENT TOOLS - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
# ==============================================================================


async def get_available_categories(tenant_id: int, session: AsyncSession) -> List[str]:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –∑–∞–¥–∞–Ω–Ω–æ–≥–æ tenant.

    –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è AI –¥–ª—è –ø–æ–∫–∞–∑–∞ –∫–ª–∏–µ–Ω—Ç—É, –∫–∞–∫–∏–µ —Ç–æ–≤–∞—Ä—ã –¥–æ—Å—Ç—É–ø–Ω—ã.

    Args:
        tenant_id: ID –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ (1 –¥–ª—è EVOPOLIKI, 2 –¥–ª—è 5DELUXE)
        session: –°–µ—Å—Å–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

    Returns:
        List[str]: –°–ø–∏—Å–æ–∫ –Ω–∞–∑–≤–∞–Ω–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
        –ü—Ä–∏–º–µ—Ä: ["EVA-–∫–æ–≤—Ä–∏–∫–∏", "3D –∫–æ–≤—Ä–∏–∫–∏", "–ß–µ—Ö–ª—ã", "–û—Ä–≥–∞–Ω–∞–π–∑–µ—Ä—ã"]
    """
    logger.info(f"[TOOL] get_available_categories(tenant_id={tenant_id})")

    try:
        # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ –ë–î
        categories = await db_queries.get_product_categories(session)

        # –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
        category_names = [cat.name_ru for cat in categories if cat.name_ru]

        logger.info(f"[TOOL] ‚úÖ –ù–∞–π–¥–µ–Ω–æ {len(category_names)} –∫–∞—Ç–µ–≥–æ—Ä–∏–π: {category_names}")
        return category_names

    except Exception as e:
        logger.error(f"[TOOL] ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: {e}")
        return []


async def get_available_brands(
    category_code: str,
    tenant_id: int,
    session: AsyncSession
) -> List[str]:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –º–∞—Ä–æ–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å —Ç–æ–≤–∞—Ä—ã –≤ –¥–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.

    –í–ê–ñ–ù–û: –í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –í–°–ï –º–∞—Ä–∫–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö,
    –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–∞–∫ –∫–∞–∫ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç—Ä–µ–±—É–µ—Ç
    —Å–ª–æ–∂–Ω—ã—Ö JOIN-–∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É patterns.

    Args:
        category_code: –ö–æ–¥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "eva_mats", "3d_mats", "seat_covers")
        tenant_id: ID –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ (1 –¥–ª—è EVOPOLIKI, 2 –¥–ª—è 5DELUXE)
        session: –°–µ—Å—Å–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

    Returns:
        List[str]: –°–ø–∏—Å–æ–∫ –Ω–∞–∑–≤–∞–Ω–∏–π –º–∞—Ä–æ–∫, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É
        –ü—Ä–∏–º–µ—Ä: ["Audi", "BMW", "Mercedes-Benz", "Toyota", "Volkswagen"]
    """
    logger.info(f"[TOOL] get_available_brands(category={category_code}, tenant_id={tenant_id})")

    try:
        # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –º–∞—Ä–∫–∏ –∏–∑ –ë–î (–ø–æ–∫–∞ –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
        brands = await db_queries.get_unique_brands_from_db(tenant_id, session)

        logger.info(f"[TOOL] ‚úÖ –ù–∞–π–¥–µ–Ω–æ {len(brands)} –º–∞—Ä–æ–∫")
        return brands

    except Exception as e:
        logger.error(f"[TOOL] ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –º–∞—Ä–æ–∫: {e}")
        return []


async def get_available_models(
    brand_name: str,
    category_code: str,
    tenant_id: int,
    session: AsyncSession
) -> List[str]:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–∞—Ä–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è.

    –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –º–æ–¥–µ–ª–∏, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ
    –ª–µ–∫–∞–ª–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ tenant.

    Args:
        brand_name: –ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Toyota")
        category_code: –ö–æ–¥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "eva_mats")
        tenant_id: ID –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ (1 –¥–ª—è EVOPOLIKI, 2 –¥–ª—è 5DELUXE)
        session: –°–µ—Å—Å–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

    Returns:
        List[str]: –°–ø–∏—Å–æ–∫ –Ω–∞–∑–≤–∞–Ω–∏–π –º–æ–¥–µ–ª–µ–π, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É
        –ü—Ä–∏–º–µ—Ä: ["Camry", "Corolla", "Land Cruiser", "RAV4"]

    Note:
        –ï—Å–ª–∏ –º–∞—Ä–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –∏–ª–∏ –¥–ª—è –Ω–µ–µ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π,
        –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫.
    """
    logger.info(f"[TOOL] get_available_models(brand={brand_name}, category={category_code}, tenant_id={tenant_id})")

    try:
        # –ü–æ–ª—É—á–∞–µ–º –º–æ–¥–µ–ª–∏ –¥–ª—è –¥–∞–Ω–Ω–æ–π –º–∞—Ä–∫–∏ –∏ tenant
        # –§—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ –Ω–∞–ª–∏—á–∏—é –ª–µ–∫–∞–ª (patterns)
        models = await db_queries.get_models_for_brand_from_db(
            brand_name=brand_name,
            tenant_id=tenant_id,
            session=session
        )

        logger.info(f"[TOOL] ‚úÖ –ù–∞–π–¥–µ–Ω–æ {len(models)} –º–æ–¥–µ–ª–µ–π –¥–ª—è –º–∞—Ä–∫–∏ '{brand_name}'")
        return models

    except Exception as e:
        logger.error(f"[TOOL] ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –º–æ–¥–µ–ª–µ–π: {e}")
        return []


async def search_patterns(
    brand_name: str,
    model_name: str,
    category_code: str,
    tenant_id: int,
    session: AsyncSession
) -> str:
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ª–µ–∫–∞–ª–∞ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
    –º–∞—Ä–∫–∞ + –º–æ–¥–µ–ª—å + –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞.

    –≠—Ç–æ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–ê–Ø —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –º–æ–∂–µ–º –ª–∏ –º—ã
    –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–∫–∞–∑ –∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ –Ω—É–∂–µ–Ω –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∑–∞–º–µ—Ä.

    Args:
        brand_name: –ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Toyota")
        model_name: –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Camry 70")
        category_code: –ö–æ–¥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "eva_mats")
        tenant_id: ID –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ (1 –¥–ª—è EVOPOLIKI, 2 –¥–ª—è 5DELUXE)
        session: –°–µ—Å—Å–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

    Returns:
        str: "FOUND" –µ—Å–ª–∏ –ª–µ–∫–∞–ª–∞ –Ω–∞–π–¥–µ–Ω—ã, "NOT_FOUND" –µ—Å–ª–∏ –ª–µ–∫–∞–ª –Ω–µ—Ç

    Examples:
        >>> await search_patterns("Toyota", "Camry", "eva_mats", 1, session)
        "FOUND"

        >>> await search_patterns("Acura", "Accord", "eva_mats", 1, session)
        "NOT_FOUND"
    """
    logger.info(f"[TOOL] search_patterns(brand={brand_name}, model={model_name}, category={category_code}, tenant_id={tenant_id})")

    try:
        # –ò—â–µ–º –ª–µ–∫–∞–ª–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        patterns = await db_queries.search_patterns(
            session=session,
            brand_name=brand_name,
            model_name=model_name,
            tenant_id=tenant_id,
            category_code=category_code
        )

        if patterns and len(patterns) > 0:
            logger.info(f"[TOOL] ‚úÖ –ù–∞–π–¥–µ–Ω–æ {len(patterns)} –ª–µ–∫–∞–ª –¥–ª—è {brand_name} {model_name}")
            return "FOUND"
        else:
            logger.info(f"[TOOL] ‚ö†Ô∏è –õ–µ–∫–∞–ª–∞ –ù–ï –Ω–∞–π–¥–µ–Ω—ã –¥–ª—è {brand_name} {model_name}")
            return "NOT_FOUND"

    except Exception as e:
        logger.error(f"[TOOL] ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –ª–µ–∫–∞–ª: {e}")
        return "NOT_FOUND"


async def calculate_price(
    brand_name: str,
    model_name: str,
    category_code: str,
    options: Dict[str, bool],
    tenant_id: int,
    session: AsyncSession
) -> Dict[str, Any]:
    """
    –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏—Ç–æ–≥–æ–≤—É—é —Ü–µ–Ω—É –∑–∞–∫–∞–∑–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è,
    –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞ –∏ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π.

    –§—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –∫—É–∑–æ–≤–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç
    —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ü–µ–Ω—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

    Args:
        brand_name: –ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Toyota")
        model_name: –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Camry 70")
        category_code: –ö–æ–¥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "eva_mats")
        options: –°–ª–æ–≤–∞—Ä—å –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä:
            {
                "with_borders": True,  # –° –±–æ—Ä—Ç–∞–º–∏
                "third_row": False     # –ë–µ–∑ —Ç—Ä–µ—Ç—å–µ–≥–æ —Ä—è–¥–∞
            }
        tenant_id: ID –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ (1 –¥–ª—è EVOPOLIKI, 2 –¥–ª—è 5DELUXE)
        session: –°–µ—Å—Å–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

    Returns:
        Dict[str, Any]: –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Ü–µ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
        {
            "total_price": 3000.0,
            "base_price": 2500.0,
            "options_price": 500.0,
            "breakdown": {
                "with_borders": 500.0,
                "third_row": 0.0
            }
        }

    Examples:
        >>> options = {"with_borders": True, "third_row": False}
        >>> await calculate_price("Toyota", "Camry", "eva_mats", options, 1, session)
        {"total_price": 3000.0, "base_price": 2500.0, ...}
    """
    logger.info(f"[TOOL] calculate_price(brand={brand_name}, model={model_name}, category={category_code}, options={options}, tenant_id={tenant_id})")

    try:
        # –ü–æ–ª—É—á–∞–µ–º –º–æ–¥–µ–ª—å —Å —Ç–∏–ø–æ–º –∫—É–∑–æ–≤–∞
        model, body_type = await db_queries.get_model_with_body_type(
            session=session,
            brand_name=brand_name,
            model_name=model_name
        )

        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–¥ —Ç–∏–ø–∞ –∫—É–∑–æ–≤–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "sedan")
        body_type_code = body_type.code if body_type else "sedan"
        logger.info(f"[TOOL] –¢–∏–ø –∫—É–∑–æ–≤–∞: {body_type_code}")

        # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ü–µ–Ω—É
        total_price, price_breakdown = await db_queries.calculate_total_price(
            session=session,
            tenant_id=tenant_id,
            category_code=category_code,
            body_type_code=body_type_code,
            selected_options=options
        )

        # –§–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç
        result = {
            "total_price": float(total_price),
            "base_price": float(price_breakdown.get("base_price", 0)),
            "options_price": sum(price_breakdown.get("options", {}).values()),
            "breakdown": price_breakdown.get("options", {})
        }

        logger.info(f"[TOOL] ‚úÖ –¶–µ–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞: {result['total_price']} —Å–æ–º")
        return result

    except Exception as e:
        logger.error(f"[TOOL] ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ —Ü–µ–Ω—ã: {e}")
        # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—É—é —Ü–µ–Ω—É –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏
        return {
            "total_price": 2500.0,
            "base_price": 2500.0,
            "options_price": 0.0,
            "breakdown": {}
        }


async def create_airtable_lead(
    tenant_id: int,
    chat_id: str,
    client_name: str,
    category_name: str,
    brand_name: str,
    model_name: str,
    options: str,
    price: float,
    session: AsyncSession
) -> str:
    """
    –§–ò–ù–ê–õ–¨–ù–´–ô –ò–ù–°–¢–†–£–ú–ï–ù–¢! –°–æ–∑–¥–∞–µ—Ç –∑–∞—è–≤–∫—É (–ª–∏–¥) –≤ Airtable —Å –¥–∞–Ω–Ω—ã–º–∏ –∑–∞–∫–∞–∑–∞ –∫–ª–∏–µ–Ω—Ç–∞.

    –≠—Ç–æ –∑–∞–≤–µ—Ä—à–∞—é—â–∏–π —à–∞–≥ –ø—Ä–æ–¥–∞–∂–∏. AI –≤—ã–∑—ã–≤–∞–µ—Ç —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ,
    –∫–∞–∫ —Å–æ–±—Ä–∞–ª –í–°–ï –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞: –∫–∞—Ç–µ–≥–æ—Ä–∏—é, –∞–≤—Ç–æ–º–æ–±–∏–ª—å, –æ–ø—Ü–∏–∏,
    —Ü–µ–Ω—É –∏ –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞.

    –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ –≤ Airtable –º–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ–ª—É—á–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    –∏ —Å–≤—è–∂–µ—Ç—Å—è —Å –∫–ª–∏–µ–Ω—Ç–æ–º –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞.

    Args:
        tenant_id: ID –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ (1 –¥–ª—è EVOPOLIKI, 2 –¥–ª—è 5DELUXE)
        chat_id: ID —á–∞—Ç–∞ WhatsApp (—Ñ–æ—Ä–º–∞—Ç: "996555123456@c.us")
        client_name: –ò–º—è –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ò–≤–∞–Ω")
        category_name: –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "EVA-–∫–æ–≤—Ä–∏–∫–∏")
        brand_name: –ú–∞—Ä–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Toyota")
        model_name: –ú–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Camry 70")
        options: –û–ø–∏—Å–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–° –±–æ—Ä—Ç–∞–º–∏ 5 —Å–º")
        price: –ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞ –∑–∞–∫–∞–∑–∞ –≤ —Å–æ–º–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3000.0)
        session: –°–µ—Å—Å–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)

    Returns:
        str: –°–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∫–ª–∏–µ–Ω—Ç—É

    Examples:
        >>> await create_airtable_lead(
        ...     tenant_id=1,
        ...     chat_id="996555123456@c.us",
        ...     client_name="–ò–≤–∞–Ω",
        ...     category_name="EVA-–∫–æ–≤—Ä–∏–∫–∏",
        ...     brand_name="Toyota",
        ...     model_name="Camry 70",
        ...     options="–° –±–æ—Ä—Ç–∞–º–∏ 5 —Å–º, —á–µ—Ä–Ω—ã–π —Ü–≤–µ—Ç",
        ...     price=3000.0,
        ...     session=session
        ... )
        "–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ —Å ID recXXXX. –°–æ–æ–±—â–∏ –∫–ª–∏–µ–Ω—Ç—É..."
    """
    logger.info(f"üíæ [TOOL] create_airtable_lead –¥–ª—è {client_name} (chat_id={chat_id[:20]}...)")

    try:
        # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        # –ü–∞—Ä—Å–∏–Ω–≥ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–∑ chat_id
        # –§–æ—Ä–º–∞—Ç chat_id: "996555123456@c.us" ‚Üí "+996555123456"
        # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        phone_number = chat_id.split('@')[0]  # –ò–∑–≤–ª–µ–∫–∞–µ–º –Ω–æ–º–µ—Ä –±–µ–∑ @c.us
        phone_with_plus = f"+{phone_number}"  # –î–æ–±–∞–≤–ª—è–µ–º "+"

        logger.info(f"üìû [TOOL] –ò–∑–≤–ª–µ—á–µ–Ω –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞: {phone_with_plus}")

        # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º tenant_slug –¥–ª—è Airtable
        # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        tenant_slug = "evopoliki" if tenant_id == 1 else "five_deluxe"

        # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        # –§–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è Airtable
        # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        lead_data = {
            "name": client_name,
            "phone": phone_with_plus,
            "username": chat_id,  # –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª–Ω—ã–π chat_id –∫–∞–∫ username
            "category": category_name,
            "car_brand": brand_name,
            "car_model": model_name,
            "options": options,
            "price": price
        }

        logger.info(f"üìã [TOOL] –î–∞–Ω–Ω—ã–µ –¥–ª—è Airtable: {lead_data}")

        # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        # –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å–æ–∑–¥–∞–Ω–∏—è –ª–∏–¥–∞ –≤ Airtable
        # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        record_id = await create_lead(lead_data, tenant_slug)

        if record_id:
            logger.info(f"‚úÖ [TOOL] –ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ –≤ Airtable, Record ID: {record_id}")
            return (
                f"–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ —Å ID {record_id}. "
                f"–°–æ–æ–±—â–∏ –∫–ª–∏–µ–Ω—Ç—É, —á—Ç–æ –≤—Å–µ –≥–æ—Ç–æ–≤–æ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä —Å–∫–æ—Ä–æ —Å–≤—è–∂–µ—Ç—Å—è —Å –Ω–∏–º –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞."
            )
        else:
            logger.error(f"‚ùå [TOOL] –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –≤ Airtable (record_id is None)")
            return (
                "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏. "
                "–°–æ–æ–±—â–∏ –∫–ª–∏–µ–Ω—Ç—É –æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–±–ª–µ–º–µ –∏ –ø–æ–ø—Ä–æ—Å–∏ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –Ω–∞–ø—Ä—è–º—É—é."
            )

    except Exception as e:
        logger.error(f"‚ùå [TOOL] –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏ –≤ Airtable: {e}", exc_info=True)
        return (
            "–ü—Ä–æ–∏–∑–æ—à–ª–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏. "
            "–°–æ–æ–±—â–∏ –∫–ª–∏–µ–Ω—Ç—É, —á—Ç–æ –µ–≥–æ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∞–Ω—ã, –∏ –º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è."
        )


# ==============================================================================
# TOOL SCHEMAS - JSON-–æ–ø–∏—Å–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è OpenAI
# ==============================================================================

tool_schemas = [
    {
        "type": "function",
        "function": {
            "name": "get_available_categories",
            "description": (
                "–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤. "
                "–ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –≤ –Ω–∞—á–∞–ª–µ –¥–∏–∞–ª–æ–≥–∞, —á—Ç–æ–±—ã –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É "
                "–≤—ã–±—Ä–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é (EVA-–∫–æ–≤—Ä–∏–∫–∏, 3D –∫–æ–≤—Ä–∏–∫–∏, –ß–µ—Ö–ª—ã –∏ —Ç.–¥.). "
                "–§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫ —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ."
            ),
            "parameters": {
                "type": "object",
                "properties": {
                    "tenant_id": {
                        "type": "integer",
                        "description": "ID –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞. –ò—Å–ø–æ–ª—å–∑—É–π 1 –¥–ª—è EVOPOLIKI, 2 –¥–ª—è 5DELUXE. –û–±—ã—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞."
                    }
                },
                "required": ["tenant_id"]
            }
        }
    },
    {
        "type": "function",
        "function": {
            "name": "get_available_brands",
            "description": (
                "–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –º–∞—Ä–æ–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞. "
                "–ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç –≤—ã–±—Ä–∞–ª –∫–∞—Ç–µ–≥–æ—Ä–∏—é, "
                "—á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å –µ–º—É —Å–ø–∏—Å–æ–∫ –º–∞—Ä–æ–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π. "
                "–§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –Ω–∞–∑–≤–∞–Ω–∏–π –º–∞—Ä–æ–∫ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ "
                "(–Ω–∞–ø—Ä–∏–º–µ—Ä: Audi, BMW, Mercedes-Benz, Toyota). "
                "–í–ê–ñ–ù–û: –í—ã–∑—ã–≤–∞–π —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –¢–û–õ–¨–ö–û –∫–æ–≥–¥–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è —É–∂–µ –∏–∑–≤–µ—Å—Ç–Ω–∞."
            ),
            "parameters": {
                "type": "object",
                "properties": {
                    "category_code": {
                        "type": "string",
                        "description": (
                            "–ö–æ–¥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞. –í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: "
                            "'eva_mats' (EVA-–∫–æ–≤—Ä–∏–∫–∏), '3d_mats' (3D –∫–æ–≤—Ä–∏–∫–∏), "
                            "'seat_covers' (–ß–µ—Ö–ª—ã), 'organizers' (–û—Ä–≥–∞–Ω–∞–π–∑–µ—Ä—ã). "
                            "–ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–¥, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–ª–∏–µ–Ω—Ç–æ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏."
                        ),
                        "enum": ["eva_mats", "3d_mats", "seat_covers", "organizers"]
                    },
                    "tenant_id": {
                        "type": "integer",
                        "description": "ID –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ (1 –¥–ª—è EVOPOLIKI, 2 –¥–ª—è 5DELUXE)"
                    }
                },
                "required": ["category_code", "tenant_id"]
            }
        }
    },
    {
        "type": "function",
        "function": {
            "name": "get_available_models",
            "description": (
                "–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –º–∞—Ä–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞. "
                "–ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç –≤—ã–±—Ä–∞–ª –º–∞—Ä–∫—É –∞–≤—Ç–æ–º–æ–±–∏–ª—è, "
                "—á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å –µ–º—É —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π. "
                "–§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –º–æ–¥–µ–ª–∏, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –ª–µ–∫–∞–ª–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. "
                "–ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç–æ–π, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ –¥–ª—è –¥–∞–Ω–Ω–æ–π –º–∞—Ä–∫–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π, "
                "–∏ –∫–ª–∏–µ–Ω—Ç—É –Ω—É–∂–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∑–∞–º–µ—Ä. "
                "–í–ê–ñ–ù–û: –í—ã–∑—ã–≤–∞–π —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –¢–û–õ–¨–ö–û –∫–æ–≥–¥–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∏ –º–∞—Ä–∫–∞ —É–∂–µ –∏–∑–≤–µ—Å—Ç–Ω—ã."
            ),
            "parameters": {
                "type": "object",
                "properties": {
                    "brand_name": {
                        "type": "string",
                        "description": (
                            "–¢–æ—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ. "
                            "–ü—Ä–∏–º–µ—Ä—ã: 'Toyota', 'BMW', 'Mercedes-Benz'. "
                            "–ò—Å–ø–æ–ª—å–∑—É–π –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑ —Å–ø–∏—Å–∫–∞, –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –æ—Ç get_available_brands."
                        )
                    },
                    "category_code": {
                        "type": "string",
                        "description": "–ö–æ–¥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞ (eva_mats, 3d_mats, seat_covers, organizers)",
                        "enum": ["eva_mats", "3d_mats", "seat_covers", "organizers"]
                    },
                    "tenant_id": {
                        "type": "integer",
                        "description": "ID –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ (1 –¥–ª—è EVOPOLIKI, 2 –¥–ª—è 5DELUXE)"
                    }
                },
                "required": ["brand_name", "category_code", "tenant_id"]
            }
        }
    },
    {
        "type": "function",
        "function": {
            "name": "search_patterns",
            "description": (
                "–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–´–ô –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç! –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö "
                "–ª–µ–∫–∞–ª–∞ (—à–∞–±–ª–æ–Ω—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞) –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ "
                "–º–∞—Ä–∫–∞ + –º–æ–¥–µ–ª—å + –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞. "
                "–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 'FOUND' –µ—Å–ª–∏ –ª–µ–∫–∞–ª–∞ –µ—Å—Ç—å (–∑–∞–∫–∞–∑ –º–æ–∂–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å—Ä–∞–∑—É), "
                "–∏–ª–∏ 'NOT_FOUND' –µ—Å–ª–∏ –ª–µ–∫–∞–ª –Ω–µ—Ç (–Ω—É–∂–µ–Ω –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∑–∞–º–µ—Ä). "
                "–ö–û–ì–î–ê –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨: –í—ã–∑—ã–≤–∞–π —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –°–†–ê–ó–£ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —É–∑–Ω–∞–ª "
                "–º–∞—Ä–∫—É, –º–æ–¥–µ–ª—å –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Ç–æ–≤–∞—Ä–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å "
                "–¥–∞–ª—å–Ω–µ–π—à–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–∏–∞–ª–æ–≥–∞. "
                "–í–ê–ñ–ù–û: –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –≤–µ—Ä–Ω—É–ª–∞ 'NOT_FOUND', –Ω–µ –ø—Ä–µ–¥–ª–∞–≥–∞–π –∫–ª–∏–µ–Ω—Ç—É –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å "
                "–≤—ã–±–æ—Ä –æ–ø—Ü–∏–π, –∞ —Å—Ä–∞–∑—É –ø—Ä–µ–¥–ª–æ–∂–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∑–∞–º–µ—Ä."
            ),
            "parameters": {
                "type": "object",
                "properties": {
                    "brand_name": {
                        "type": "string",
                        "description": "–¢–æ—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è, –Ω–∞–ø—Ä–∏–º–µ—Ä 'Toyota', 'BMW'"
                    },
                    "model_name": {
                        "type": "string",
                        "description": (
                            "–¢–æ—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è. –ü—Ä–∏–º–µ—Ä—ã: 'Camry', 'Camry 70', 'X5', 'E-Class'. "
                            "–ò—Å–ø–æ–ª—å–∑—É–π –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑ —Å–ø–∏—Å–∫–∞, –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –æ—Ç get_available_models, "
                            "–∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —É–∫–∞–∑–∞–ª –∫–ª–∏–µ–Ω—Ç."
                        )
                    },
                    "category_code": {
                        "type": "string",
                        "description": "–ö–æ–¥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞ (eva_mats, 3d_mats, seat_covers, organizers)",
                        "enum": ["eva_mats", "3d_mats", "seat_covers", "organizers"]
                    },
                    "tenant_id": {
                        "type": "integer",
                        "description": "ID –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ (1 –¥–ª—è EVOPOLIKI, 2 –¥–ª—è 5DELUXE)"
                    }
                },
                "required": ["brand_name", "model_name", "category_code", "tenant_id"]
            }
        }
    },
    {
        "type": "function",
        "function": {
            "name": "calculate_price",
            "description": (
                "–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏—Ç–æ–≥–æ–≤—É—é —Ü–µ–Ω—É –∑–∞–∫–∞–∑–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è, "
                "–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞ –∏ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–º –æ–ø—Ü–∏–π. "
                "–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Ä–∞–∑–±–∏–≤–∫—É —Ü–µ–Ω—ã: –±–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞, —Ü–µ–Ω–∞ –æ–ø—Ü–∏–π, –∏—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞. "
                "–ö–û–ì–î–ê –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨: –í—ã–∑—ã–≤–∞–π —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫: "
                "1) search_patterns –≤–µ—Ä–Ω—É–ª–∞ 'FOUND' (–ª–µ–∫–∞–ª–∞ –Ω–∞–π–¥–µ–Ω—ã), "
                "2) –∫–ª–∏–µ–Ω—Ç –≤—ã–±—Ä–∞–ª –æ–ø—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, '—Å –±–æ—Ä—Ç–∞–º–∏' –∏–ª–∏ '–±–µ–∑ –±–æ—Ä—Ç–æ–≤'). "
                "–ù–ï –≤—ã–∑—ã–≤–∞–π —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é, –µ—Å–ª–∏ –ª–µ–∫–∞–ª –Ω–µ—Ç (NOT_FOUND) - –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ "
                "—Ü–µ–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º."
            ),
            "parameters": {
                "type": "object",
                "properties": {
                    "brand_name": {
                        "type": "string",
                        "description": "–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è, –Ω–∞–ø—Ä–∏–º–µ—Ä 'Toyota'"
                    },
                    "model_name": {
                        "type": "string",
                        "description": "–ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è, –Ω–∞–ø—Ä–∏–º–µ—Ä 'Camry 70'"
                    },
                    "category_code": {
                        "type": "string",
                        "description": "–ö–æ–¥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞",
                        "enum": ["eva_mats", "3d_mats", "seat_covers", "organizers"]
                    },
                    "options": {
                        "type": "object",
                        "description": (
                            "–°–ª–æ–≤–∞—Ä—å –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–º –æ–ø—Ü–∏–π. "
                            "–ö–ª—é—á–∏ - –∫–æ–¥—ã –æ–ø—Ü–∏–π, –∑–Ω–∞—á–µ–Ω–∏—è - boolean (True –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ, False –µ—Å–ª–∏ –Ω–µ—Ç). "
                            "–í–æ–∑–º–æ–∂–Ω—ã–µ –æ–ø—Ü–∏–∏: "
                            "'with_borders' (—Å –±–æ—Ä—Ç–∞–º–∏/–±–µ–∑ –±–æ—Ä—Ç–æ–≤), "
                            "'third_row' (—Ç—Ä–µ—Ç–∏–π —Ä—è–¥ –¥–ª—è –≤–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫–æ–≤ 7 –º–µ—Å—Ç). "
                            "–ü—Ä–∏–º–µ—Ä: {\"with_borders\": true, \"third_row\": false}"
                        ),
                        "properties": {
                            "with_borders": {
                                "type": "boolean",
                                "description": "True –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –≤—ã–±—Ä–∞–ª –≤–∞—Ä–∏–∞–Ω—Ç '—Å –±–æ—Ä—Ç–∞–º–∏', False –µ—Å–ª–∏ '–±–µ–∑ –±–æ—Ä—Ç–æ–≤'"
                            },
                            "third_row": {
                                "type": "boolean",
                                "description": "True –µ—Å–ª–∏ –Ω—É–∂–µ–Ω —Ç—Ä–µ—Ç–∏–π —Ä—è–¥ (–¥–ª—è 7-–º–µ—Å—Ç–Ω—ã—Ö –∞–≤—Ç–æ), False –µ—Å–ª–∏ –Ω–µ—Ç"
                            }
                        }
                    },
                    "tenant_id": {
                        "type": "integer",
                        "description": "ID –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ (1 –¥–ª—è EVOPOLIKI, 2 –¥–ª—è 5DELUXE)"
                    }
                },
                "required": ["brand_name", "model_name", "category_code", "options", "tenant_id"]
            }
        }
    },
    {
        "type": "function",
        "function": {
            "name": "create_airtable_lead",
            "description": (
                "üéØ –§–ò–ù–ê–õ–¨–ù–´–ô –ò–ù–°–¢–†–£–ú–ï–ù–¢! –°–æ–∑–¥–∞–µ—Ç –∑–∞—è–≤–∫—É (–ª–∏–¥) –≤ Airtable —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∑–∞–∫–∞–∑–∞ –∫–ª–∏–µ–Ω—Ç–∞. "
                "–≠—Ç–æ –∑–∞–≤–µ—Ä—à–∞—é—â–∏–π —à–∞–≥ –ø—Ä–æ–¥–∞–∂–∏ - –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ –º–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ–ª—É—á–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "
                "–∏ —Å–≤—è–∂–µ—Ç—Å—è —Å –∫–ª–∏–µ–Ω—Ç–æ–º –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏/—É—Å—Ç–∞–Ω–æ–≤–∫–∏. "
                "\n\n"
                "–ö–û–ì–î–ê –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨: –í—ã–∑—ã–≤–∞–π —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Å–æ–±—Ä–∞–ª –í–°–ï –¥–∞–Ω–Ω—ã–µ:\n"
                "1Ô∏è‚É£ –ö–∞—Ç–µ–≥–æ—Ä–∏—é —Ç–æ–≤–∞—Ä–∞ (—á–µ—Ä–µ–∑ get_available_categories)\n"
                "2Ô∏è‚É£ –ú–∞—Ä–∫—É –∏ –º–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è (—á–µ—Ä–µ–∑ get_available_brands, get_available_models)\n"
                "3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏–ª –Ω–∞–ª–∏—á–∏–µ –ª–µ–∫–∞–ª (—á–µ—Ä–µ–∑ search_patterns ‚Üí –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 'FOUND')\n"
                "4Ô∏è‚É£ –£–∑–Ω–∞–ª –æ–ø—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ (—Å –±–æ—Ä—Ç–∞–º–∏ / –±–µ–∑ –±–æ—Ä—Ç–æ–≤ –∏ —Ç.–¥.)\n"
                "5Ô∏è‚É£ –†–∞—Å—Å—á–∏—Ç–∞–ª —Ü–µ–Ω—É (—á–µ—Ä–µ–∑ calculate_price)\n"
                "6Ô∏è‚É£ –£–∑–Ω–∞–ª –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞\n"
                "\n"
                "–í–ê–ñ–ù–û:\n"
                "‚Ä¢ –ù–ï –≤—ã–∑—ã–≤–∞–π —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é, –µ—Å–ª–∏ —É —Ç–µ–±—è –Ω–µ—Ç –í–°–ï–• –¥–∞–Ω–Ω—ã—Ö!\n"
                "‚Ä¢ –ù–ï —Å–ø—Ä–∞—à–∏–≤–∞–π —É –∫–ª–∏–µ–Ω—Ç–∞ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ - –æ–Ω —É–∂–µ –µ—Å—Ç—å –≤ chat_id!\n"
                "‚Ä¢ chat_id –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π (—Ñ–æ—Ä–º–∞—Ç: '996555123456@c.us')\n"
                "‚Ä¢ –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ —Ñ—É–Ω–∫—Ü–∏—è –≤–µ—Ä–Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ - –ø–µ—Ä–µ–¥–∞–π –µ–≥–æ –∫–ª–∏–µ–Ω—Ç—É –∫–∞–∫ –µ—Å—Ç—å."
            ),
            "parameters": {
                "type": "object",
                "properties": {
                    "tenant_id": {
                        "type": "integer",
                        "description": "ID –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ (1 –¥–ª—è EVOPOLIKI, 2 –¥–ª—è 5DELUXE). –û–±—ã—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞."
                    },
                    "chat_id": {
                        "type": "string",
                        "description": (
                            "ID —á–∞—Ç–∞ WhatsApp –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ '996555123456@c.us'. "
                            "–ò–∑ —ç—Ç–æ–≥–æ ID –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞. "
                            "–í–ê–ñ–ù–û: –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –í–°–ï–ì–î–ê –¥–æ—Å—Ç—É–ø–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ - –∏—Å–ø–æ–ª—å–∑—É–π –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é chat_id –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞!"
                        )
                    },
                    "client_name": {
                        "type": "string",
                        "description": (
                            "–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è –∑–∞—è–≤–∫–∏. –ü—Ä–∏–º–µ—Ä—ã: '–ò–≤–∞–Ω', '–ú–∞—Ä–∏—è', '–ê–∑–∞–º–∞—Ç', '–ñ–∞–Ω–∞—Ä–∞'. "
                            "–ü–æ–ø—Ä–æ—Å–∏ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞–∑–≤–∞—Ç—å –∏–º—è, –µ—Å–ª–∏ –æ–Ω –µ–≥–æ –µ—â–µ –Ω–µ —Å–æ–æ–±—â–∏–ª. "
                            "–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–ª—å–∫–æ –∏–º–µ–Ω–∏, –±–µ–∑ —Ñ–∞–º–∏–ª–∏–∏."
                        )
                    },
                    "category_name": {
                        "type": "string",
                        "description": (
                            "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ. "
                            "–ü—Ä–∏–º–µ—Ä—ã: 'EVA-–∫–æ–≤—Ä–∏–∫–∏', '3D –∫–æ–≤—Ä–∏–∫–∏', '–ß–µ—Ö–ª—ã', '–û—Ä–≥–∞–Ω–∞–π–∑–µ—Ä—ã'. "
                            "–ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤–µ—Ä–Ω—É–ª–∞ —Ñ—É–Ω–∫—Ü–∏—è get_available_categories."
                        )
                    },
                    "brand_name": {
                        "type": "string",
                        "description": (
                            "–ú–∞—Ä–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ. "
                            "–ü—Ä–∏–º–µ—Ä—ã: 'Toyota', 'BMW', 'Mercedes-Benz', 'Lexus', 'Nissan'. "
                            "–ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑ —Å–ø–∏—Å–∫–∞ get_available_brands."
                        )
                    },
                    "model_name": {
                        "type": "string",
                        "description": (
                            "–ú–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è. "
                            "–ü—Ä–∏–º–µ—Ä—ã: 'Camry 70', 'X5', 'E-Class', 'RX 350', 'Qashqai'. "
                            "–ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑ —Å–ø–∏—Å–∫–∞ get_available_models."
                        )
                    },
                    "options": {
                        "type": "string",
                        "description": (
                            "–¢–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–º –æ–ø—Ü–∏–π. "
                            "–ü—Ä–∏–º–µ—Ä—ã: '–° –±–æ—Ä—Ç–∞–º–∏ 5 —Å–º', '–ë–µ–∑ –±–æ—Ä—Ç–æ–≤', '–° –±–æ—Ä—Ç–∞–º–∏, —Ç—Ä–µ—Ç–∏–π —Ä—è–¥', '–ë–µ–∑ –±–æ—Ä—Ç–æ–≤, –≤—Ç–æ—Ä–æ–π —Ä—è–¥'. "
                            "–°—Ñ–æ—Ä–º–∏—Ä—É–π —á–∏—Ç–∞–µ–º–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–æ–≥–æ, —á—Ç–æ –≤—ã–±—Ä–∞–ª –∫–ª–∏–µ–Ω—Ç (–æ–ø—Ü–∏–∏ –∏–∑ calculate_price)."
                        )
                    },
                    "price": {
                        "type": "number",
                        "description": (
                            "–ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞ –∑–∞–∫–∞–∑–∞ –≤ —Å–æ–º–∞—Ö (KGS). "
                            "–ü—Ä–∏–º–µ—Ä—ã: 3000.0, 4500.0, 2800.0. "
                            "–í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑—É–π —Ü–µ–Ω—É –∏–∑ –ø–æ–ª—è 'total_price', –∫–æ—Ç–æ—Ä—É—é –≤–µ—Ä–Ω—É–ª–∞ —Ñ—É–Ω–∫—Ü–∏—è calculate_price."
                        )
                    }
                },
                "required": ["tenant_id", "chat_id", "client_name", "category_name", "brand_name", "model_name", "options", "price"]
            }
        }
    }
]

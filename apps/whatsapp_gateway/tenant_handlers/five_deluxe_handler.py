"""
–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ FIVE_DELUXE.

–ó–ê–ì–õ–£–®–ö–ê: –≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç –±–∞–∑–æ–≤—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
–º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã. –í –±—É–¥—É—â–µ–º –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ø–æ–ª–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏.
"""

import logging
from typing import Dict, Any

logger = logging.getLogger(__name__)


async def handle_5deluxe_menu(chat_id: str, tenant_config, sender_name: str = "–ì–æ—Å—Ç—å") -> Dict[str, Any]:
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–µ–Ω—é –¥–ª—è –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ FIVE_DELUXE.

    –ó–ê–ì–õ–£–®–ö–ê: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
    –í –±—É–¥—É—â–µ–º –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é.

    Args:
        chat_id: ID —á–∞—Ç–∞ WhatsApp
        tenant_config: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ (TenantConfig)
        sender_name: –ò–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è

    Returns:
        Dict —Å —Ç–∏–ø–æ–º —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
    """
    logger.info(f"üè¢ [FIVE_DELUXE] Generating stub menu for {sender_name} ({chat_id})")

    return {
        "type": "text",
        "message": (
            f"üåü –ü—Ä–∏–≤–µ—Ç, {sender_name}!\n\n"
            "üöß –ú–µ–Ω—é –¥–ª—è Five Deluxe –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.\n\n"
            "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞—à–∏–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.\n\n"
            "üìû –ú—ã —Å–∫–æ—Ä–æ –¥–æ–±–∞–≤–∏–º –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –º–µ–Ω—é!"
        )
    }


async def handle_5deluxe_message(
    chat_id: str,
    text_message: str,
    tenant_config,
    session,
    sender_name: str = "–ì–æ—Å—Ç—å"
) -> str:
    """
    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è FIVE_DELUXE.

    –ó–ê–ì–õ–£–®–ö–ê: –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ–Ω—é –Ω–∞ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.

    Args:
        chat_id: ID —á–∞—Ç–∞ WhatsApp
        text_message: –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        tenant_config: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞
        session: AsyncSession –¥–ª—è –ë–î
        sender_name: –ò–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è

    Returns:
        –¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    """
    logger.info(f"üí¨ [FIVE_DELUXE] Message from {sender_name}: {text_message}")

    # –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥–ª—É—à–∫—É –º–µ–Ω—é
    menu_data = await handle_5deluxe_menu(chat_id, tenant_config, sender_name)

    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    return menu_data.get("message", "–ú–µ–Ω—é –¥–ª—è Five Deluxe –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.")
